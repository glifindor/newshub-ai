# üéâ BACKEND –ì–û–¢–û–í! - –ò—Ç–æ–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ:

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ backend:

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py                  # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å lifespan –∏ scheduler
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py          # SQLAlchemy –º–æ–¥–µ–ª–∏ (NewsItem, NewsSource, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ .env
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py          # Async SQLAlchemy
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.py          # JWT –∏ –ø–∞—Ä–æ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.py            # Structlog –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ collector.py         # üîç –°–±–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ RSS/API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai_analyzer.py       # ü§ñ AI-–∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ OpenRouter
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ telegram_poster.py   # üì§ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scheduler.py         # ‚è∞ APScheduler –∑–∞–¥–∞—á–∏
‚îÇ   ‚îî‚îÄ‚îÄ api/v1/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ endpoints/
‚îÇ           ‚îú‚îÄ‚îÄ auth.py          # JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ           ‚îú‚îÄ‚îÄ news.py          # CRUD –Ω–æ–≤–æ—Å—Ç–µ–π
‚îÇ           ‚îú‚îÄ‚îÄ sources.py       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
‚îÇ           ‚îú‚îÄ‚îÄ telegram.py      # Telegram –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ           ‚îú‚îÄ‚îÄ admin.py         # –ê–¥–º–∏–Ω–∫–∞
‚îÇ           ‚îî‚îÄ‚îÄ pipeline.py      # üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ endpoints
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ create_admin.py          # –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ test_openrouter.py       # –¢–µ—Å—Ç OpenRouter API
‚îÇ   ‚îú‚îÄ‚îÄ test_telegram.py         # –¢–µ—Å—Ç Telegram Bot
‚îÇ   ‚îú‚îÄ‚îÄ test_collector.py        # –¢–µ—Å—Ç —Å–±–æ—Ä—â–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ test_integration.py      # –ü–æ–ª–Ω—ã–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç
‚îÇ
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ test_collector.py        # Pytest —Ç–µ—Å—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ requirements.txt             # –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile                   # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ README_BACKEND.md            # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ QUICKSTART.md                # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å:

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
docker-compose up -d backend

# –ü—Ä–æ–≤–µ—Ä–∫–∞
docker-compose logs -f backend

# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:
# ‚úÖ Database connected and tables created
# ‚úÖ Default news sources initialized
# ‚úÖ Scheduler started
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–æ

```bash
cd backend

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ PostgreSQL (–µ—Å–ª–∏ –Ω–µ—Ç)
docker run -d --name postgres \
  -e POSTGRES_USER=newsadmin \
  -e POSTGRES_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å \
  -e POSTGRES_DB=newshub_db \
  -p 5432:5432 \
  postgres:15-alpine

# –ó–∞–ø—É—Å–∫ backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

---

## üì° –û—Å–Ω–æ–≤–Ω—ã–µ API Endpoints:

### üîπ –°–±–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π (–≤—Ä—É—á–Ω—É—é)

```bash
# –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏
curl -X POST "http://localhost:8000/api/v1/pipeline/collect"

# –¢–æ–ª—å–∫–æ –∫—Ä–∏–ø—Ç–æ
curl -X POST "http://localhost:8000/api/v1/pipeline/collect?channel=crypto"

# –¢–æ–ª—å–∫–æ –ø–æ–ª–∏—Ç–∏–∫–∞
curl -X POST "http://localhost:8000/api/v1/pipeline/collect?channel=politics"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "News collection completed",
  "result": {
    "total_collected": 25,
    "sources": {
      "CoinTelegraph RSS": 10,
      "CoinDesk RSS": 8,
      "TechCrunch Crypto": 7
    },
    "timestamp": "2025-10-18T12:00:00"
  }
}
```

---

### üîπ AI-–∞–Ω–∞–ª–∏–∑ –Ω–æ–≤–æ—Å—Ç–µ–π

```bash
# –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å 10 –Ω–æ–≤–æ—Å—Ç–µ–π
curl -X POST "http://localhost:8000/api/v1/pipeline/analyze?limit=10"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "News analysis completed",
  "result": {
    "total": 10,
    "analyzed": 7,
    "rejected": 3,
    "failed": 0
  }
}
```

---

### üîπ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram

```bash
# –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å 5 –Ω–æ–≤–æ—Å—Ç–µ–π
curl -X POST "http://localhost:8000/api/v1/pipeline/post?limit=5"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "News posting completed",
  "result": {
    "total": 5,
    "posted": 5,
    "failed": 0
  }
}
```

---

### üîπ –ü–æ–ª–Ω—ã–π pipeline (collect ‚Üí analyze ‚Üí post)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É
curl -X POST "http://localhost:8000/api/v1/pipeline/pipeline?channel=crypto"
```

---

### üîπ –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–æ–≤–æ—Å—Ç–µ–π

```bash
# –í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
curl "http://localhost:8000/api/v1/news/?page=1&per_page=20"

# –¢–æ–ª—å–∫–æ –∫—Ä–∏–ø—Ç–æ, —Å—Ç–∞—Ç—É—Å = analyzed
curl "http://localhost:8000/api/v1/news/?category=crypto&status=analyzed"

# –ü–æ–∏—Å–∫ –ø–æ Bitcoin
curl "http://localhost:8000/api/v1/news/?search=bitcoin"

# Pending –Ω–æ–≤–æ—Å—Ç–∏
curl "http://localhost:8000/api/v1/news/?status=pending"

# –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ
curl "http://localhost:8000/api/v1/news/?status=published"
```

---

### üîπ –û–¥–æ–±—Ä–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é

```bash
# –ü–æ–ª—É—á–∏—Ç—å ID –Ω–æ–≤–æ—Å—Ç–∏
curl "http://localhost:8000/api/v1/news/?status=analyzed" | jq '.items[0].id'

# –û–¥–æ–±—Ä–∏—Ç—å –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
curl -X POST "http://localhost:8000/api/v1/news/550e8400-e29b-41d4-a716-446655440000/approve"
```

---

## ‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º (Scheduler)

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ backend **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

| –ó–∞–¥–∞—á–∞ | –ò–Ω—Ç–µ—Ä–≤–∞–ª | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|--------|----------|------------|
| üì• `collect_news_job` | **10 –º–∏–Ω—É—Ç** | –°–æ–±–∏—Ä–∞–µ—Ç –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (RSS + NewsAPI) |
| ü§ñ `analyze_news_job` | **5 –º–∏–Ω—É—Ç** | –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç pending –Ω–æ–≤–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ OpenRouter (GPT-4) |
| üì§ `post_news_job` | **7 –º–∏–Ω—É—Ç** | –ü—É–±–ª–∏–∫—É–µ—Ç analyzed –Ω–æ–≤–æ—Å—Ç–∏ –≤ Telegram –∫–∞–Ω–∞–ª—ã |

**–í–∞–º –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!** üéâ

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:

```python
# app/services/scheduler.py

scheduler.add_job(
    collect_news_job,
    trigger=IntervalTrigger(minutes=15),  # –ò–∑–º–µ–Ω–∏—Ç—å –∑–¥–µ—Å—å
    ...
)
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –¢–µ—Å—Ç OpenRouter API

```bash
docker-compose exec backend python scripts/test_openrouter.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OpenRouter API...
‚úÖ OpenRouter —Ä–∞–±–æ—Ç–∞–µ—Ç!
üìù –û—Ç–≤–µ—Ç: Bitcoin –¥–æ—Å—Ç–∏–≥ –æ—Ç–º–µ—Ç–∫–∏ $100,000, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º...
```

---

### 2. –¢–µ—Å—Ç Telegram Bot

```bash
docker-compose exec backend python scripts/test_telegram.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
ü§ñ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram Bot...
‚úÖ –ë–æ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω!
   –ò–º—è: NewsHub AI Bot
   Username: @your_bot
   ID: 1234567890
‚úâÔ∏è  –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —á–∞—Ç 433868823
```

---

### 3. –¢–µ—Å—Ç —Å–±–æ—Ä—â–∏–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π

```bash
docker-compose exec backend python scripts/test_collector.py
```

---

### 4. –ü–æ–ª–Ω—ã–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç

```bash
docker-compose exec backend python scripts/test_integration.py
```

**–≠—Ç–æ –ø—Ä–æ–π–¥—ë—Ç –≤–µ—Å—å —Ü–∏–∫–ª:**
1. –°–æ–±–µ—Ä—ë—Ç –Ω–æ–≤–æ—Å—Ç–∏
2. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ AI
3. –ü–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
4. –°–ø—Ä–æ—Å–∏—Ç, –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ª–∏ –≤ Telegram

---

## üìä Swagger UI

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:8000/docs**

–¢–∞–º –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ endpoints —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ!

---

## üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –ë–î

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
docker-compose exec postgres psql -U newsadmin newshub_db

# –ü–æ–ª–µ–∑–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã:

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
SELECT status, COUNT(*) FROM news_items GROUP BY status;

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 –Ω–æ–≤–æ—Å—Ç–µ–π
SELECT title, status, relevance_score, created_at 
FROM news_items 
ORDER BY created_at DESC 
LIMIT 10;

# –ù–æ–≤–æ—Å—Ç–∏ —Å –≤—ã—Å–æ–∫–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º
SELECT title, relevance_score, category 
FROM news_items 
WHERE relevance_score >= 8 
ORDER BY relevance_score DESC;

# –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Å–µ–≥–æ–¥–Ω—è
SELECT COUNT(*) 
FROM news_items 
WHERE published_at::date = CURRENT_DATE;
```

---

## üéØ Workflow (–∫–∞–∫ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç)

### 1Ô∏è‚É£ –°–±–æ—Ä (NewsCollector)

```python
# –ò—Å—Ç–æ—á–Ω–∏–∫–∏:
- CoinTelegraph RSS
- CoinDesk RSS  
- TechCrunch Crypto
- RIA Novosti RSS
- TASS RSS
- BBC Russia
- NewsAPI Crypto
- NewsAPI Politics

# –ü—Ä–æ—Ü–µ—Å—Å:
1. –ü–∞—Ä—Å–∏–Ω–≥ RSS feeds (feedparser)
2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ keywords:
   crypto: ["bitcoin", "ethereum", "crypto", "blockchain", ...]
   politics: ["kremlin", "putin", "russia", "ukraine", ...]
3. –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è: MD5(title + content)
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î —Å–æ status=PENDING
```

---

### 2Ô∏è‚É£ AI-–∞–Ω–∞–ª–∏–∑ (AIAnalyzer)

```python
# –ü—Ä–æ–º–ø—Ç –¥–ª—è OpenRouter:
"""
–¢—ã ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫—Ä–∏–ø—Ç–æ–∞–Ω–∞–ª–∏—Ç–∏–∫/–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫.
–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –Ω–æ–≤–æ—Å—Ç—å [—Ç–µ–∫—Å—Ç].
–í–µ—Ä–Ω–∏ JSON:
{
  "teaser": "–∫—Ä–∞—Ç–∫–∏–π —Ç–∏–∑–µ—Ä 80-120 —Å–ª–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º",
  "insights": ["–∏–Ω—Å–∞–π—Ç 1", "–∏–Ω—Å–∞–π—Ç 2", "–∏–Ω—Å–∞–π—Ç 3"],
  "relevance_score": 8,
  "hashtags": ["#Crypto", "#Bitcoin", "#AI"]
}
–ï—Å–ª–∏ relevance_score < 7, –ø—Ä–æ–ø—É—Å—Ç–∏.
"""

# –õ–æ–≥–∏–∫–∞:
if relevance_score >= 7:
    status = ANALYZED
    if relevance_score >= 8:
        requires_moderation = True  # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω—É
else:
    status = REJECTED  # –ù–µ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å

# Fallback –º–æ–¥–µ–ª–∏:
1. openai/gpt-4-turbo-preview (–æ—Å–Ω–æ–≤–Ω–∞—è)
2. anthropic/claude-3-haiku (–µ—Å–ª–∏ 1 –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞)
3. meta-llama/llama-3-70b-instruct
4. google/gemini-pro
```

---

### 3Ô∏è‚É£ –ü—É–±–ª–∏–∫–∞—Ü–∏—è (TelegramPoster)

```python
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Telegram:
message = f"""
{emoji} <b>{title}</b>

üìù {ai_summary}

üí° <b>AI-–∏–Ω—Å–∞–π—Ç:</b>
{ai_insights}

üîó <a href='{url}'>–ß–∏—Ç–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ</a>

{hashtags}
"""

# –û—Ç–ø—Ä–∞–≤–∫–∞:
if image_url:
    bot.send_photo(channel, image_url, caption=message)
else:
    bot.send_message(channel, message)

# –ö–∞–Ω–∞–ª—ã:
crypto ‚Üí @crypto_ainews
politics ‚Üí @kremlin_digest

# –ú–æ–¥–µ—Ä–∞—Ü–∏—è:
if requires_moderation:
    send_to_admin(news)  # –ö–Ω–æ–ø–∫–∏: ‚úÖ –û–¥–æ–±—Ä–∏—Ç—å | ‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π:

```python
# –§–∞–π–ª: app/services/collector.py
# –§—É–Ω–∫—Ü–∏—è: initialize_default_sources()

default_sources = [
    {
        'name': '–í–∞—à Custom RSS',
        'type': SourceType.RSS,
        'url': 'https://example.com/rss',
        'category': NewsChannel.CRYPTO,
        'keywords': ['bitcoin', 'crypto'],
    },
]
```

### –ò–∑–º–µ–Ω–∏—Ç—å keywords —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:

```python
# –§–∞–π–ª: app/services/collector.py
# –ö–ª–∞—Å—Å: NewsCollector

self.crypto_keywords = [
    "bitcoin", "ethereum", ...
    # –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏
]

self.politics_keywords = [
    "kremlin", "putin", ...
    # –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏
]
```

### –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã AI:

```python
# –§–∞–π–ª: app/services/ai_analyzer.py
# –§—É–Ω–∫—Ü–∏—è: create_analysis_prompt()

prompt = f"""
–í–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç...
"""
```

### –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç Telegram –ø–æ—Å—Ç–æ–≤:

```python
# –§–∞–π–ª: app/services/telegram_poster.py
# –§—É–Ω–∫—Ü–∏—è: format_message()

message = f"–í–∞—à —Ñ–æ—Ä–º–∞—Ç..."
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

```bash
# –†–µ–∞–ª-—Ç–∞–π–º –ª–æ–≥–∏
docker-compose logs -f backend

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
docker-compose logs backend | grep ERROR

# –ü–æ–∏—Å–∫ –ø–æ —Å–µ—Ä–≤–∏—Å—É
docker-compose logs backend | grep "NewsCollector"
```

### –ú–µ—Ç—Ä–∏–∫–∏

```bash
# Prometheus –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:8000/metrics

# Grafana dashboard
http://localhost:3001
```

---

## üêõ Troubleshooting

### "OpenRouter API error 401"
‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `OPENROUTER_API_KEY` –≤ `.env`
‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å –±–∞–ª–∞–Ω—Å –Ω–∞ openrouter.ai

### "Telegram Bot –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"
‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_BOT_TOKEN`
‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞–Ω–∞–ª—ã –∫–∞–∫ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**
‚úÖ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `/start` –≤ –ª–∏—á–∫—É

### "No news collected"
‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å RSS feeds (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã)
‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ keywords —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
‚úÖ –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `docker-compose logs backend | grep "NewsCollector"`

### "Database connection failed"
‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ `.env`
‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω: `docker-compose ps postgres`

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à backend **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω** –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–ß—Ç–æ –¥–∞–ª—å—à–µ:**

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ backend: `docker-compose up -d backend`
2. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ Swagger UI: http://localhost:8000/docs
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API: `POST /api/v1/pipeline/pipeline`
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram –∫–∞–Ω–∞–ª—ã ‚Äî –Ω–æ–≤–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è!
5. ‚úÖ –ü—Ä–æ—Å—Ç–æ –∂–¥–∏—Ç–µ ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- üìò –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `backend/README_BACKEND.md`
- üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: `backend/QUICKSTART.md`
- üèóÔ∏è –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: `ARCHITECTURE.md`

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:**
- `scripts/test_openrouter.py`
- `scripts/test_telegram.py`
- `scripts/test_collector.py`
- `scripts/test_integration.py`

---

**–í–æ–ø—Ä–æ—Å—ã? –ü—Ä–æ–±–ª–µ–º—ã?**
- GitHub Issues: https://github.com/glifindor/newsportal/issues
- Telegram: @your_admin

---

## üåü –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```
üìÅ –§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ: 20+
üìù –°—Ç—Ä–æ–∫ –∫–æ–¥–∞: 2000+
üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª: 100%
‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: –ü—Ä–æ–¥–∞–∫—à–Ω!
```

**–£–¥–∞—á–∏! üöÄüéâ**
