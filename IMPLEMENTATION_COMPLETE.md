# ‚úÖ –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–æ 100% —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –¥–ª—è News-Service

---

## üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ/–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. **–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ `internal/models/news.go` - –¥–æ–±–∞–≤–ª–µ–Ω—ã SEO –ø–æ–ª—è:
  - `seo_title` (VARCHAR 70)
  - `seo_description` (VARCHAR 160)  
  - `seo_keywords` (VARCHAR 255)
  - `seo_image` (VARCHAR 500)

### 2. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ `migrations/004_add_seo_fields.sql`
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ SEO –∫–æ–ª–æ–Ω–æ–∫
  - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö meta –ø–æ–ª–µ–π

- ‚úÖ `migrations/005_add_fulltext_search.sql`
  - –ö–æ–ª–æ–Ω–∫–∞ `search_vector` —Ç–∏–ø–∞ tsvector
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–≥–≥–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  - GIN –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
  - –í–µ—Å–æ–≤–∞—è —Å—Ö–µ–º–∞: A=title, B=summary, C=content, D=keywords
  - Helper —Ñ—É–Ω–∫—Ü–∏–∏: `news_search_ranked()`, `news_search_with_snippet()`

### 3. **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞**
- ‚úÖ `internal/service/seo_service.go` - –ù–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å SEO:
  - `GenerateMetaTags()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –º–µ—Ç–∞—Ç–µ–≥–æ–≤
  - `OptimizeTitle()` - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–º–∞–∫—Å 60 —Å–∏–º–≤–æ–ª–æ–≤)
  - `GenerateDescription()` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è (–º–∞–∫—Å 160 —Å–∏–º–≤–æ–ª–æ–≤)
  - `ExtractKeywords()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ —Å –≤–µ—Å–∞–º–∏
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–æ–ø-—Å–ª–æ–≤ (English + Russian)

- ‚úÖ `internal/service/news_service.go` - –û–±–Ω–æ–≤–ª–µ–Ω:
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SEOService
  - –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è SEO –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏
  - –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è SEO –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ title/content
  - –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `Search()` —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 4. **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
- ‚úÖ `internal/repository/news_repository.go` - –î–æ–±–∞–≤–ª–µ–Ω–æ:
  - `FullTextSearch()` –º–µ—Ç–æ–¥ —Å PostgreSQL FTS
  - –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (`ts_rank`)
  - –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –ø–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–º –Ω–æ–≤–æ—Å—Ç—è–º
  - –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 5. **HTTP API**
- ‚úÖ `internal/handler/http_handler.go` - –î–æ–±–∞–≤–ª–µ–Ω endpoint:
  - `GET /api/v1/news/search?q=query&page=1&limit=10`
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤–æ—Å—Ç–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ Redis

### 6. **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞**
- ‚úÖ `cmd/news-service/main.go` - –û–±–Ω–æ–≤–ª–µ–Ω–æ:
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SEOService
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–∞ `/api/v1/news/search`
  - gRPC –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω)

### 7. **–£—Ç–∏–ª–∏—Ç—ã**
- ‚úÖ `pkg/logger/logger.go` - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `GetLogger()`

---

## üîç –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### SEO –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
```go
// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è:
// - seo_title: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–º–∞–∫—Å 60 —Å–∏–º–≤–æ–ª–æ–≤)
// - seo_description: –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–º–∞–∫—Å 160 —Å–∏–º–≤–æ–ª–æ–≤)
// - seo_keywords: –¢–æ–ø-5 –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –ø–æ —á–∞—Å—Ç–æ—Ç–µ
// - seo_image: –ò–∑ featured_image
```

### Full Text Search
```sql
-- PostgreSQL FTS —Å –≤–µ—Å–∞–º–∏:
-- 'A' (–≤—ã—Å—à–∏–π) - title, seo_title
-- 'B' (–≤—ã—Å–æ–∫–∏–π) - summary, seo_description  
-- 'C' (—Å—Ä–µ–¥–Ω–∏–π) - content
-- 'D' (–Ω–∏–∑–∫–∏–π) - seo_keywords

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª–µ–π
```

### API Endpoint
```http
GET /api/v1/news/search?q=golang&page=1&limit=10

Response:
{
  "data": [...],
  "pagination": {
    "total": 42,
    "page": 1,
    "limit": 10,
    "total_pages": 5
  },
  "query": "golang"
}
```

---

## üìä –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ | ‚úÖ 100% | Create, Read, Update, Delete |
| –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è | ‚úÖ 100% | –ü–æ —Å—Ç–∞—Ç—É—Å—É, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞–≤—Ç–æ—Ä—É |
| –ü–∞–≥–∏–Ω–∞—Ü–∏—è | ‚úÖ 100% | –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è |
| SEO –ø–æ–ª—è | ‚úÖ 100% | seo_title, seo_description, seo_keywords, seo_image |
| SEO –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è | ‚úÖ 100% | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ |
| Full Text Search | ‚úÖ 100% | PostgreSQL FTS —Å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ–º |
| –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ 100% | Redis –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ |
| REST API | ‚úÖ 100% | 19 endpoints (–±—ã–ª 18, –¥–æ–±–∞–≤–ª–µ–Ω /search) |

---

## üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ —É–ø–∞–∫–æ–≤–∞—Ç—å
cd "c:\Users\Grifindor\Desktop\–ù–û–í–°–¢–ù–û–ô –°–ê–ô–¢"
tar -czf news-service-updated.tar.gz news-service/

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp news-service-updated.tar.gz root@151.241.228.203:/opt/news-portal/
```

### –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
ssh root@151.241.228.203

cd /opt/news-portal
tar -xzf news-service-updated.tar.gz

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker exec -i news-postgres psql -U newsportal -d newsportal_db < news-service/migrations/004_add_seo_fields.sql
docker exec -i news-postgres psql -U newsportal -d newsportal_db < news-service/migrations/005_add_fulltext_search.sql
```

### –®–∞–≥ 3: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
```bash
cd /opt/news-portal/news-service

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑
docker build -t news-portal-news-service:latest .

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker restart news-service

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs news-service -f --tail 50
```

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8092/health

# –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ (SEO –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
curl -X POST http://localhost:8092/api/v1/news \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Golang Best Practices for Microservices Architecture",
    "content": "Golang is a powerful language for building scalable microservices...",
    "category_id": "..."
  }'

# –¢–µ—Å—Ç Full Text Search
curl "http://localhost:8092/api/v1/news/search?q=golang&page=1&limit=5"
```

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [x] SEO –ø–æ–ª—è –≤ –º–æ–¥–µ–ª–∏ News
- [x] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è SEO –ø–æ–ª–µ–π
- [x] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è Full Text Search
- [x] SEO Service —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
- [x] Full Text Search –≤ Repository
- [x] Search –º–µ—Ç–æ–¥ –≤ Service —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- [x] SearchNews endpoint –≤ Handler
- [x] –†–æ—É—Ç /api/v1/news/search –≤ main.go
- [x] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SEOService –≤ main.go
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ NewsService —Å SEO –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**News-Service —Ç–µ–ø–µ—Ä—å –Ω–∞ 100% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º!**

### –î–æ–±–∞–≤–ª–µ–Ω–æ:
1. ‚úÖ SEO –ø–æ–ª—è (4 –Ω–æ–≤—ã—Ö –ø–æ–ª—è)
2. ‚úÖ SEO –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è (3 –º–µ—Ç–æ–¥–∞)
3. ‚úÖ Full Text Search (PostgreSQL FTS)
4. ‚úÖ –ù–æ–≤—ã–π API endpoint `/api/v1/news/search`

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:
- PostgreSQL Full Text Search —Å –≤–µ—Å–æ–≤–æ–π —Å—Ö–µ–º–æ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è search_vector
- GIN –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SEO –º–µ—Ç–∞—Ç–µ–≥–æ–≤ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Google

**–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É! üöÄ**
