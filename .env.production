# ============================================
# PRODUCTION ENVIRONMENT VARIABLES
# Шаблон для production деплоя
# ============================================

# ============================================
# DATABASE
# ============================================
POSTGRES_USER=newsadmin
POSTGRES_PASSWORD=565f257582a4f8f50113208df8ff2d6abe2181d1
POSTGRES_DB=newshub_db

# Database URL (автоматически генерируется из переменных выше)
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# ============================================
# REDIS
# ============================================
REDIS_PASSWORD=Alex3122
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0

# ============================================
# RABBITMQ
# ============================================
RABBITMQ_USER=newshub
RABBITMQ_PASS=Alex3122
RABBITMQ_URL=amqp://${RABBITMQ_USER}:${RABBITMQ_PASS}@rabbitmq:5672/

# ============================================
# JWT & SECURITY
# ============================================
# Генерировать: openssl rand -hex 32
JWT_SECRET_KEY=ad7f162fd8215a112366b6b06c02562fc36d34a7e875ebc00b857c62802a57bf
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================
# OPENROUTER API
# ============================================
OPENROUTER_API_KEY=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
OPENROUTER_MODEL=openai/gpt-4-turbo-preview
# Альтернативы:
# - anthropic/claude-3.5-sonnet (лучшее качество, дороже)
# - openai/gpt-4-turbo-preview (баланс цена/качество)
# - google/gemini-2.0-flash-thinking-exp:free (бесплатно)

# ============================================
# FREEPIK API (опционально)
# ============================================
FREEPIK_API_KEY=FPSXd3e44aeff69a803df8fb23f72c67fdab

# ============================================
# NEWSAPI (опционально)
# ============================================
NEWSAPI_KEY=6d6850070c914baa879569480f2f9292

# ============================================
# TELEGRAM BOT
# ============================================
# Получить токен: https://t.me/BotFather
TELEGRAM_BOT_TOKEN=8286012057:AAG7YfZlvgij4aS-7Z9QzMBFfDhUsHphj9o

# Каналы для публикации (должны начинаться с @)
TELEGRAM_CRYPTO_CHANNEL=@crypto_ainews
TELEGRAM_POLITICS_CHANNEL=@kremlin_digest

# Admin Chat ID для уведомлений (получить: https://t.me/userinfobot)
TELEGRAM_ADMIN_CHAT_ID=433868823

# Rate limiting (сообщений в минуту)
TELEGRAM_RATE_LIMIT=20

# ============================================
# FRONTEND URLs
# ============================================
# Production
NEXT_PUBLIC_API_URL=http://151.241.228.203/api
NEXT_PUBLIC_WS_URL=ws://151.241.228.203

# Или с доменом:
# NEXT_PUBLIC_API_URL=https://newshub.example.com/api
# NEXT_PUBLIC_WS_URL=wss://newshub.example.com

# ============================================
# NEXTAUTH (Frontend Authentication)
# ============================================
NEXTAUTH_URL=http://151.241.228.203
# Или: NEXTAUTH_URL=https://newshub.example.com

# Генерировать: openssl rand -base64 32
NEXTAUTH_SECRET=IG6YGII02sDmgIWdaJ/pcRxbhCA0Gb4vOl1D9IDlVU4=

# ============================================
# MONITORING
# ============================================
# Grafana
GRAFANA_USER=admin
GRAFANA_PASSWORD=Alex3122

# Flower (Celery monitoring)
FLOWER_USER=admin
FLOWER_PASSWORD=Alex3122

# ============================================
# APPLICATION SETTINGS
# ============================================
ENVIRONMENT=production
LOG_LEVEL=INFO
DEBUG=False

# CORS Origins (разделенные запятой)
CORS_ORIGINS=http://151.241.228.203,https://newshub.example.com

# ============================================
# CELERY
# ============================================
CELERY_BROKER_URL=${RABBITMQ_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TIMEZONE=UTC

# ============================================
# NEWS COLLECTION SETTINGS
# ============================================
# Как часто собирать новости (в минутах)
NEWS_COLLECTION_INTERVAL=30

# Максимум новостей за раз
NEWS_COLLECTION_LIMIT=50

# Минимальная релевантность для публикации (0-1)
NEWS_RELEVANCE_THRESHOLD=0.6

# ============================================
# BACKUP SETTINGS
# ============================================
# Путь для backup'ов
BACKUP_DIR=/opt/newshub/backups

# Retention (дней)
BACKUP_RETENTION_DAYS=7

# ============================================
# SENTRY (опционально, для error tracking)
# ============================================
# SENTRY_DSN=https://your-sentry-dsn

# ============================================
# AWS S3 (опционально, для хранения файлов)
# ============================================
# AWS_ACCESS_KEY_ID=YOUR_ACCESS_KEY
# AWS_SECRET_ACCESS_KEY=YOUR_SECRET_KEY
# AWS_S3_BUCKET=newshub-media
# AWS_S3_REGION=us-east-1

# ============================================
# CLOUDFLARE (опционально, для CDN)
# ============================================
# CLOUDFLARE_API_TOKEN=YOUR_TOKEN
# CLOUDFLARE_ZONE_ID=YOUR_ZONE_ID

# ============================================
# SMTP (опционально, для email уведомлений)
# ============================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your@email.com
# SMTP_PASSWORD=your_app_password
# SMTP_FROM=noreply@newshub.ai

# ============================================
# NOTES
# ============================================
# 1. Замените все CHANGE_ME_ на реальные значения
# 2. Используйте сильные пароли (минимум 16 символов)
# 3. Генерируйте случайные значения для секретов
# 4. НЕ коммитьте этот файл в Git!
# 5. Добавьте .env в .gitignore
# 6. Используйте разные пароли для prod и dev
# 7. Регулярно ротируйте секреты (каждые 90 дней)

# ============================================
# QUICK COMMANDS
# ============================================
# Генерация случайных паролей:
# openssl rand -hex 16        # 32 символа hex
# openssl rand -base64 24     # 32 символа base64
# pwgen -s 32 1               # 32 случайных символа

# Проверка переменных:
# docker-compose exec backend env | grep DATABASE_URL
# docker-compose exec backend python -c "from app.core.config import settings; print(settings.DATABASE_URL)"

# Тест подключения к БД:
# docker-compose exec backend python -c "from app.database import engine; print(engine.connect())"
